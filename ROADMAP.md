# Roadmap развития проекта Dota HUD

## Цели
- Довести визуальный стиль HUD до максимально близкого к Dota+ (фон, градиенты, типографика).
- Сохранить SOLID и чистую архитектуру: UI, приложение и домен развиваются независимо, конфигурация — декларативная.
- Сделать HUD расширяемым: новые окна, макро‑тайминги и правила добавляются через YAML без правок кода.

---

## Принципы архитектуры
- **SRP**: каждый слой отвечает за своё (конфиги → маппер → use-case → UI).
- **OCP**: добавление новых блоков/источников данных без переписывания существующих.
- **DIP**: UI зависит от портов, домен не знает про инфраструктуру.
- **Чистая архитектура**: домен и use-case не содержат деталей UI и инфраструктуры.

---

## Этап 1 (приоритет): Визуальное соответствие Dota+ и управление выделением (1–2 недели)
**Цель:** добиться визуального совпадения HUD с Dota+ и сделать выделения контента управляемыми.
- Согласовать палитру, градиенты, альфу и типографику.
- Единый стиль блоков: фон под текстом, одинаковые отступы и размеры.
- Анимация предупреждений: мягкий подсвет при появлении окон danger/warn.
- Локальная окраска: подсвечивать только блок с предупреждением, а не весь HUD.
- Поддержать выборочную подсветку любых блоков (СЕЙЧАС/ДАЛЕЕ/MACRO) с той же анимацией.
- Управление высотой HUD: автоподбор по контенту или расширение при переполнении текста.

**Результат:** HUD воспринимается как встроенное дополнение Dota+ и даёт чёткую визуальную иерархию.

---

## Этап 2: Конфигурация и контент (1 неделя)
**Цель:** полностью управляемый контент без правок кода.
- Разделить макро‑тайминги в отдельный YAML.
- Унифицировать формат описания окон и макро‑подсказок.
- Добавить правила для автоматической фильтрации/ограничения количества строк.

**Результат:** контент меняется без вмешательства в код.

---

## Этап 3: Динамика и UX (1–2 недели)
**Цель:** улучшить восприятие информации.
- Анимации появления/затухания текста и фоновых подсветок.
- Поддержка нескольких уровней важности для блоков (info/warn/danger).
- Микро‑настройки для размеров/отступов в конфиге.

---

## Этап 4: Надёжность и масштабирование (2–3 недели)
**Цель:** стабильность в матчах и расширяемость.
- Больше интеграции с GSI: корректный ресинк при паузах/перезапусках.
- Настроить fallback‑режимы, если GSI временно недоступен.
- Структурировать доменные правила по модулям (руны, терзатель, лотос, окна риска).

---

## Этап 5: Тестирование и релизы (параллельно)
**Цель:** предсказуемые изменения без регрессий.
- Юнит‑тесты для форматтеров, маппинга конфигов и доменной логики.
- Базовые визуальные скриншоты (golden‑tests) для Qt HUD.
- Чек‑лист релиза: визуальная проверка, контроль конфигурации, smoke‑тесты.

---

## Актуальные UX‑правки (анимации и MACRO)
**Цель:** убрать мерцание всего HUD, оставить точечные анимации и добавить прогресс‑заливку MACRO.
- HUD не должен мерцать глобально: фон и градиент статичны.
- Для danger/warn — одноразовая (короткая, плавная) заливка только области окна.
- MACRO‑тайминги получают цветную прогресс‑заливку по мере приближения (Wisdom/Power/Bounty).
- Добавление новых MACRO‑таймингов с кастомным цветом (Рошан, Терзатель и т.п.).

---

## Список задач (1 задача = 1 PR)
### Приоритет: анимации и MACRO прогресс
1. **PR#A1: Убрать мерцание HUD и локализовать анимации**
   - Отключить постоянные fade‑анимации всего текста.
   - Оставить короткую анимацию только для warning‑окна (danger/warn).
   - Градиент и фон HUD остаются статичными.
2. **PR#A2: Анимация заливки warning‑окна**
   - Реализовать единичный “пульс”/заливку блока warning при появлении.
   - Цвет заливки зависит от уровня (danger=красный, warn=золотой).
3. **PR#A3: MACRO‑прогресс и настраиваемые цвета**
   - Прогресс‑заливка для Wisdom/Power/Bounty по мере приближения тайминга.
   - Конфиг для добавления новых макро‑таймингов + цвет заливки (например, Roshan/Tormentor).
4. **PR#A4: Настройка MACRO‑визуала**
   - Опционально переработать макро‑блок (разметка/отступы/легенда).
   - Конфигируемые параметры отображения.

---

## Список задач (1 задача = 1 PR)
### Приоритетные задачи (этап 1)
1. **PR#1: Палитра и базовый градиент Dota+**
   - Уточнить базовые цвета, альфу, градиент фона.
   - Согласовать оттенки текста и базовых блоков.
2. **PR#2: Локальная подсветка окна предупреждения**
   - Подсвечивать только блок warning (danger/warn), без заливки всего HUD.
   - Сохранить текущую анимацию подсветки.
3. **PR#3: Подсветка произвольных блоков (now/next/macro)**
   - Добавить возможность анимированной подсветки для любого блока.
   - Подготовить API/конфиг для уровней важности.
4. **PR#4: Авто‑высота HUD при переполнении текста**
   - Динамическое изменение высоты окна (только по высоте).
   - Гарантировать читаемость длинных окон danger.

### Задачи этапа 2 (конфигурация и контент)
5. **PR#5: Унификация формата описания окон и макро‑подсказок**
6. **PR#6: Конфиг лимитов строк и сокращений**

### Задачи этапа 3 (динамика и UX)
7. **PR#7: Анимации появления/затухания текста и подсветок**
8. **PR#8: Настройки типографики/отступов через конфиг**

### Задачи этапа 4 (надёжность и масштабирование)
9. **PR#9: Улучшенный ресинк с GSI**
10. **PR#10: Fallback‑режимы при недоступном GSI**
11. **PR#11: Декомпозиция доменных правил по модулям**

### Задачи этапа 5 (тесты и релизы)
12. **PR#12: Юнит‑тесты для форматтеров/маппинга**
13. **PR#13: Golden‑скриншоты для Qt HUD**
14. **PR#14: Релизный чек‑лист и smoke‑тесты**
